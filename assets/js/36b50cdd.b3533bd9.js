"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[4124],{8141(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"caracalCore/cliReference/agent","title":"Agent Commands","description":"The agent command group manages principal identities in Caracal.","source":"@site/docs/caracalCore/cliReference/agent.md","sourceDirName":"caracalCore/cliReference","slug":"/caracalCore/cliReference/agent","permalink":"/caracalCore/cliReference/agent","draft":false,"unlisted":false,"editUrl":"https://github.com/Garudex-Labs/Caracal/tree/main/docs/docs/caracalCore/cliReference/agent.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Agent Commands"},"sidebar":"caracalSidebar","previous":{"title":"CLI Reference","permalink":"/caracalCore/cliReference/"},"next":{"title":"Policy Commands","permalink":"/caracalCore/cliReference/policy"}}');var s=r(4848),t=r(8453);const l={sidebar_position:2,title:"Agent Commands"},d="Agent Commands",c={},a=[{value:"Commands Overview",id:"Commands-Overview",level:2},{value:"register",id:"register",level:2},{value:"Options",id:"Options",level:3},{value:"Validation Rules",id:"Validation-Rules",level:3},{value:"Examples",id:"Examples",level:3},{value:"Error Handling",id:"Error-Handling",level:3},{value:"list",id:"list",level:2},{value:"Options",id:"Options-1",level:3},{value:"get",id:"get",level:2},{value:"Options",id:"Options-2",level:3},{value:"Best Practices",id:"Best-Practices",level:2},{value:"Naming Conventions",id:"Naming-Conventions",level:3},{value:"Hierarchical Principals",id:"Hierarchical-Principals",level:3},{value:"See Also",id:"See-Also",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"Agent-Commands",children:"Agent Commands"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"agent"})," command group manages principal identities in Caracal."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"caracal agent COMMAND [OPTIONS]\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"Commands-Overview",children:"Commands Overview"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Command"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"#register",children:(0,s.jsx)(n.code,{children:"register"})})}),(0,s.jsx)(n.td,{children:"Register a new principal"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"#list",children:(0,s.jsx)(n.code,{children:"list"})})}),(0,s.jsx)(n.td,{children:"List all registered principals"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"#get",children:(0,s.jsx)(n.code,{children:"get"})})}),(0,s.jsx)(n.td,{children:"Get details for a specific principal"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"register",children:"register"}),"\n",(0,s.jsx)(n.p,{children:"Register a new principal (AI agent, user, or service)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"caracal agent register [OPTIONS]\n"})}),"\n",(0,s.jsx)(n.h3,{id:"Options",children:"Options"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Short"}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"Required"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--name"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-n"})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Unique human-readable name"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--owner"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-o"})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Owner identifier (email or username)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--parent-id"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-p"})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Parent principal ID for hierarchical relationships"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--metadata"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-m"})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Key=value pairs (repeatable)"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"Validation-Rules",children:"Validation Rules"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Rule"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Name uniqueness"}),(0,s.jsx)(n.td,{children:"Principal names must be unique across the registry"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Parent validation"}),(0,s.jsx)(n.td,{children:"If --parent-id specified, parent must exist"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"Examples",children:"Examples"}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"Basic registration"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'caracal agent register \\\n  --name "my-agent" \\\n  --owner "user@example.com"\n'})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Output:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Principal registered successfully!\n\nPrincipal ID: 550e8400-e29b-41d4-a716-446655440000\nName:         my-agent\nOwner:        user@example.com\nCreated At:   2024-01-15T10:00:00Z\n"})})]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"Registration with metadata"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'caracal agent register \\\n  --name "production-agent" \\\n  --owner "ops@example.com" \\\n  --metadata environment=production \\\n  --metadata team=platform \\\n  --metadata version=1.0.0\n'})})]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"Child principal with parent"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'caracal agent register \\\n  --name "worker-1" \\\n  --owner "team@example.com" \\\n  --parent-id 550e8400-e29b-41d4-a716-446655440000\n'})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Output:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Principal registered successfully!\n\nPrincipal ID:     7a3b2c1d-e4f5-6789-abcd-ef0123456789\nName:             worker-1\nOwner:            team@example.com\nParent Principal: orchestrator (550e8400-e29b-41d4-a716-446655440000)\nCreated At:       2024-01-15T10:00:00Z\n"})})]}),"\n",(0,s.jsx)(n.h3,{id:"Error-Handling",children:"Error Handling"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Error"}),(0,s.jsx)(n.th,{children:"Cause"}),(0,s.jsx)(n.th,{children:"Solution"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Name already exists"}),(0,s.jsx)(n.td,{children:"Name is not unique"}),(0,s.jsx)(n.td,{children:"Choose a different name"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Parent not found"}),(0,s.jsx)(n.td,{children:"Invalid parent ID"}),(0,s.jsx)(n.td,{children:"Verify parent exists"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"list",children:"list"}),"\n",(0,s.jsx)(n.p,{children:"List all registered principals."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"caracal agent list [OPTIONS]\n"})}),"\n",(0,s.jsx)(n.h3,{id:"Options-1",children:"Options"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Short"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--format"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-f"})}),(0,s.jsx)(n.td,{children:"table"}),(0,s.jsx)(n.td,{children:"Output format: table or json"})]})})]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"Table output"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"caracal agent list\n"})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Output:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Principal ID                          Name              Owner              Created            Parent\n------------------------------------------------------------------------------------------------------\n550e8400-e29b-41d4-a716-446655440000  orchestrator      admin@example.com  2024-01-15T10:00   -\n7a3b2c1d-e4f5-6789-abcd-ef0123456789  worker-1          team@example.com   2024-01-15T10:05   orchestrator\n"})})]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"Filter with jq"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Get only names\ncaracal agent list --format json | jq '.[].name'\n\n# Find by owner\ncaracal agent list --format json | jq '.[] | select(.owner | contains(\"team\"))'\n\n# Get child principals\ncaracal agent list --format json | jq '.[] | select(.parent_agent_id != null)'\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"get",children:"get"}),"\n",(0,s.jsx)(n.p,{children:"Get detailed information about a specific principal."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"caracal agent get [OPTIONS]\n"})}),"\n",(0,s.jsx)(n.h3,{id:"Options-2",children:"Options"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Short"}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"Required"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--agent-id"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-a"})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Principal ID or name"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--format"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-f"})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"No"}),(0,s.jsx)(n.td,{children:"table"}),(0,s.jsx)(n.td,{children:"Output format: table or json"})]})]})]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"Get by ID"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"caracal agent get --agent-id 550e8400-e29b-41d4-a716-446655440000\n"})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Output:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Principal Details\n=================\n\nPrincipal ID:  550e8400-e29b-41d4-a716-446655440000\nName:          orchestrator\nOwner:         admin@example.com\nCreated At:    2024-01-15T10:00:00Z\nParent:        None\n\nMetadata:\n  environment: production\n  team:        platform\n\nChild Principals:\n  - worker-1 (7a3b2c1d-e4f5-6789-abcd-ef0123456789)\n  - worker-2 (8b4c3d2e-f5a6-7890-bcde-f01234567890)\n\nActive Policies:\n  - Policy 001: resources=api:* actions=read,write\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"Best-Practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"Naming-Conventions",children:"Naming Conventions"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Pattern"}),(0,s.jsx)(n.th,{children:"Example"}),(0,s.jsx)(n.th,{children:"Use Case"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Environment prefix"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"prod-agent-1"})}),(0,s.jsx)(n.td,{children:"Distinguish environments"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Team prefix"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"platform-orchestrator"})}),(0,s.jsx)(n.td,{children:"Group by team"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Hierarchy suffix"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"main-worker-1"})}),(0,s.jsx)(n.td,{children:"Show relationships"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"Hierarchical-Principals",children:"Hierarchical Principals"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"+----------------------------------+\n|          ORCHESTRATOR            |\n+----------------+-----------------+\n                 |\n     +-----------+-----------+\n     |           |           |\n+----v----+ +----v----+ +----v----+\n| Worker1 | | Worker2 | | Worker3 |\n+---------+ +---------+ +---------+\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Child authority is scoped by parent delegation"}),"\n",(0,s.jsx)(n.li,{children:"Track team-level activity in the ledger"}),"\n",(0,s.jsx)(n.li,{children:"Revoke all children by revoking parent mandate"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"See-Also",children:"See Also"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./policy",children:"Policy Commands"})," -- Create authority policies"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./delegation",children:"Delegation Commands"})," -- Manage authority delegation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./ledger",children:"Ledger Commands"})," -- Query authority events"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453(e,n,r){r.d(n,{R:()=>l,x:()=>d});var i=r(6540);const s={},t=i.createContext(s);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);