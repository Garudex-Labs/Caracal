"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[663],{6684(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>a,frontMatter:()=>l,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"caracalCore/cliReference/keys","title":"Key Commands","description":"The keys command group manages cryptographic keys.","source":"@site/docs/caracalCore/cliReference/keys.md","sourceDirName":"caracalCore/cliReference","slug":"/caracalCore/cliReference/keys","permalink":"/caracalCore/cliReference/keys","draft":false,"unlisted":false,"editUrl":"https://github.com/Garudex-Labs/Caracal/tree/main/docs/docs/caracalCore/cliReference/keys.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11,"title":"Key Commands"},"sidebar":"caracalSidebar","previous":{"title":"Backup Commands","permalink":"/caracalCore/cliReference/backup"},"next":{"title":"SDK Client","permalink":"/caracalCore/apiReference/sdkClient"}}');var i=r(4848),t=r(8453);const l={sidebar_position:11,title:"Key Commands"},d="Key Commands",c={},h=[{value:"Commands Overview",id:"Commands-Overview",level:2},{value:"Key Types",id:"Key-Types",level:2},{value:"list",id:"list",level:2},{value:"Options",id:"Options",level:3},{value:"Examples",id:"Examples",level:3},{value:"rotate",id:"rotate",level:2},{value:"Options",id:"Options-1",level:3},{value:"Examples",id:"Examples-1",level:3},{value:"Key Rotation Schedule",id:"Key-Rotation-Schedule",level:3},{value:"export",id:"export",level:2},{value:"Options",id:"Options-2",level:3},{value:"Examples",id:"Examples-2",level:3},{value:"Security Best Practices",id:"Security-Best-Practices",level:2},{value:"See Also",id:"See-Also",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"Key-Commands",children:"Key Commands"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"keys"})," command group manages cryptographic keys."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"caracal keys COMMAND [OPTIONS]\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"Commands-Overview",children:"Commands Overview"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Command"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#list",children:(0,i.jsx)(n.code,{children:"list"})})}),(0,i.jsx)(n.td,{children:"List all keys"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#rotate",children:(0,i.jsx)(n.code,{children:"rotate"})})}),(0,i.jsx)(n.td,{children:"Rotate a key"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#export",children:(0,i.jsx)(n.code,{children:"export"})})}),(0,i.jsx)(n.td,{children:"Export public key"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"Key-Types",children:"Key Types"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Key Type"}),(0,i.jsx)(n.th,{children:"Algorithm"}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"merkle-signing"})}),(0,i.jsx)(n.td,{children:"Ed25519"}),(0,i.jsx)(n.td,{children:"Sign Merkle tree roots"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"delegation"})}),(0,i.jsx)(n.td,{children:"Ed25519"}),(0,i.jsx)(n.td,{children:"Sign delegation tokens"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"config-encryption"})}),(0,i.jsx)(n.td,{children:"AES-256-GCM"}),(0,i.jsx)(n.td,{children:"Encrypt configuration secrets"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"list",children:"list"}),"\n",(0,i.jsx)(n.p,{children:"List all keys."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"caracal keys list [OPTIONS]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"Options",children:"Options"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Short"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--type"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-t"})}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Filter by key type"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--format"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-f"})}),(0,i.jsx)(n.td,{children:"table"}),(0,i.jsx)(n.td,{children:"Output format"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"Examples",children:"Examples"}),"\n",(0,i.jsxs)(r,{children:[(0,i.jsx)("summary",{children:"List All Keys"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"caracal keys list\n"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Cryptographic Keys\n==================\n\nKey ID                  Type              Algorithm    Created              Expires              Status\n-----------------------------------------------------------------------------------------------------------\nkey-001-merkle          merkle-signing    Ed25519      2024-01-01T00:00     2025-01-01T00:00     [OK] Active\nkey-002-merkle          merkle-signing    Ed25519      2023-01-01T00:00     2024-01-01T00:00     Expired\nkey-001-delegation      delegation        Ed25519      2024-01-01T00:00     Never                [OK] Active\nkey-001-config          config-encryption AES-256-GCM  2024-01-01T00:00     Never                [OK] Active\n\nTotal: 4 keys (3 active, 1 expired)\n"})})]}),"\n",(0,i.jsxs)(r,{children:[(0,i.jsx)("summary",{children:"Filter by Type"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"caracal keys list --type merkle-signing\n"})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"rotate",children:"rotate"}),"\n",(0,i.jsx)(n.p,{children:"Rotate a key."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"caracal keys rotate [OPTIONS]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"Options-1",children:"Options"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Short"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--key-type"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-t"})}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,i.jsx)(n.td,{children:"Key type to rotate"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--expire-days"})}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"No"}),(0,i.jsx)(n.td,{children:"Days until new key expires"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--reason"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-r"})}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"No"}),(0,i.jsx)(n.td,{children:"Reason for rotation"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"Examples-1",children:"Examples"}),"\n",(0,i.jsxs)(r,{children:[(0,i.jsx)("summary",{children:"Rotate Merkle Signing Key"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'caracal keys rotate \\\n  --key-type merkle-signing \\\n  --expire-days 365 \\\n  --reason "Annual key rotation"\n'})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Rotating merkle-signing key...\n\n[WARNING] This will create a new signing key.\n          The old key will be marked as expired.\n          New Merkle proofs will use the new key.\n\nProceed? (yes/no): yes\n\nKey Rotation Complete\n---------------------\n\nOld Key:\n  Key ID:   key-001-merkle\n  Status:   Expired (graceful)\n\nNew Key:\n  Key ID:   key-003-merkle\n  Algorithm: Ed25519\n  Created:  2024-01-15T10:00:00Z\n  Expires:  2025-01-15T10:00:00Z\n\n[OK] Key rotation successful\n\nNote: Verify new proofs with updated public key.\n"})})]}),"\n",(0,i.jsx)(n.h3,{id:"Key-Rotation-Schedule",children:"Key Rotation Schedule"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Key Type"}),(0,i.jsx)(n.th,{children:"Recommended Rotation"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"merkle-signing"})}),(0,i.jsx)(n.td,{children:"Annually or on security events"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"delegation"})}),(0,i.jsx)(n.td,{children:"Never (per-agent keys)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"config-encryption"})}),(0,i.jsx)(n.td,{children:"On compromise only"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"export",children:"export"}),"\n",(0,i.jsx)(n.p,{children:"Export public key."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"caracal keys export [OPTIONS]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"Options-2",children:"Options"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Short"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--key-id"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-k"})}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,i.jsx)(n.td,{children:"Key ID to export"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--output"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-o"})}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"No"}),(0,i.jsx)(n.td,{children:"Output file path"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--format"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"-f"})}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"No"}),(0,i.jsx)(n.td,{children:"Format: pem, jwk, base64"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"Examples-2",children:"Examples"}),"\n",(0,i.jsxs)(r,{children:[(0,i.jsx)("summary",{children:"Export to PEM"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"caracal keys export \\\n  --key-id key-001-merkle \\\n  --format pem \\\n  --output merkle-public.pem\n"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Exporting public key: key-001-merkle\n\nFormat:  PEM\nOutput:  merkle-public.pem\n\n[OK] Public key exported successfully\n\nNote: This is the PUBLIC key only.\n      Private key is never exported.\n"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"merkle-public.pem:"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"-----BEGIN PUBLIC KEY-----\nMCowBQYDK2VwAyEA7mCqAq8kVg3GkLz3t5OnYThNqNYh3Vq9JH2k8LoQaAA=\n-----END PUBLIC KEY-----\n"})})]}),"\n",(0,i.jsxs)(r,{children:[(0,i.jsx)("summary",{children:"Export to JWK"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"caracal keys export \\\n  --key-id key-001-merkle \\\n  --format jwk\n"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Output:"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "kty": "OKP",\n  "crv": "Ed25519",\n  "x": "7mCqAq8kVg3GkLz3t5OnYThNqNYh3Vq9JH2k8LoQaAA",\n  "kid": "key-001-merkle",\n  "use": "sig",\n  "alg": "EdDSA"\n}\n'})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"Security-Best-Practices",children:"Security Best Practices"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Practice"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Regular rotation"}),(0,i.jsx)(n.td,{children:"Rotate merkle-signing keys annually"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Secure storage"}),(0,i.jsx)(n.td,{children:"Store keys in HSM or secure enclave in production"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Backup"}),(0,i.jsx)(n.td,{children:"Backup encrypted keys with master password"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Audit"}),(0,i.jsx)(n.td,{children:"Log all key operations"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Recovery"}),(0,i.jsx)(n.td,{children:"Document key recovery procedures"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"See-Also",children:"See Also"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"./merkle",children:"Merkle Commands"})," - Uses signing keys for proofs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"./delegation",children:"Delegation Commands"})," - Uses agent keys for tokens"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"./backup",children:"Backup Commands"})," - Include keys in backups"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453(e,n,r){r.d(n,{R:()=>l,x:()=>d});var s=r(6540);const i={},t=s.createContext(i);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);