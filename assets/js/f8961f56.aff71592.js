"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[3536],{2282(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"caracalEnterprise/guides/usage","title":"Using Caracal Enterprise","description":"End-to-end guide for operating Caracal Enterprise: from setting up your workspace to enforcing authority across distributed AI agent deployments.","source":"@site/docs/caracalEnterprise/guides/usage.md","sourceDirName":"caracalEnterprise/guides","slug":"/caracalEnterprise/guides/usage","permalink":"/caracalEnterprise/guides/usage","draft":false,"unlisted":false,"editUrl":"https://github.com/Garudex-Labs/Caracal/tree/main/docs/docs/caracalEnterprise/guides/usage.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Using Caracal Enterprise"},"sidebar":"caracalSidebar","previous":{"title":"Principal & Policy Management","permalink":"/caracalEnterprise/guides/principalManagement"},"next":{"title":"Architecture","permalink":"/caracalEnterprise/architecture"}}');var i=r(4848),a=r(8453);const s={sidebar_position:4,title:"Using Caracal Enterprise"},l="Using Caracal Enterprise",d={},c=[{value:"Workflow Overview",id:"Workflow-Overview",level:2},{value:"Step 1: Create a Workspace",id:"Step-1-Create-a-Workspace",level:2},{value:"Step 2: Register Principals",id:"Step-2-Register-Principals",level:2},{value:"Via SDK",id:"Via-SDK",level:3},{value:"Via Dashboard",id:"Via-Dashboard",level:3},{value:"Step 3: Define Authority Policies",id:"Step-3-Define-Authority-Policies",level:2},{value:"Via SDK",id:"Via-SDK-1",level:3},{value:"Via Dashboard",id:"Via-Dashboard-1",level:3},{value:"Step 4: Deploy Gateway with Enterprise Sync",id:"Step-4-Deploy-Gateway-with-Enterprise-Sync",level:2},{value:"Docker Compose",id:"Docker-Compose",level:3},{value:"Verify Sync",id:"Verify-Sync",level:3},{value:"Step 5: Agents Use Mandates",id:"Step-5-Agents-Use-Mandates",level:2},{value:"Request and Validate",id:"Request-and-Validate",level:3},{value:"Through Gateway",id:"Through-Gateway",level:3},{value:"Step 6: Monitor and Audit",id:"Step-6-Monitor-and-Audit",level:2},{value:"Export Audit Data",id:"Export-Audit-Data",level:3},{value:"Common Workflows",id:"Common-Workflows",level:2},{value:"Onboarding a New Agent",id:"Onboarding-a-New-Agent",level:3},{value:"Revoking Authority",id:"Revoking-Authority",level:3},{value:"Delegating Authority",id:"Delegating-Authority",level:3},{value:"Enterprise SDK vs Core SDK",id:"Enterprise-SDK-vs-Core-SDK",level:2},{value:"Troubleshooting",id:"Troubleshooting",level:2},{value:"Contact",id:"Contact",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"Using-Caracal-Enterprise",children:"Using Caracal Enterprise"})}),"\n",(0,i.jsx)(n.p,{children:"End-to-end guide for operating Caracal Enterprise: from setting up your workspace to enforcing authority across distributed AI agent deployments."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"Workflow-Overview",children:"Workflow Overview"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"+-----------------------------------------------------------------+\n|                  Enterprise Dashboard                           |\n|                                                                 |\n|  1. Create Workspace                                            |\n|  2. Register Principals (AI agents, users, services)            |\n|  3. Define Authority Policies                                   |\n|  4. Deploy Caracal Gateway with Enterprise Sync                 |\n|  5. Agents request + validate mandates through Gateway/SDK      |\n|  6. Monitor authority events in Analytics dashboard             |\n+-----------------------------------------------------------------+\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"Step-1-Create-a-Workspace",children:"Step 1: Create a Workspace"}),"\n",(0,i.jsx)(n.p,{children:"A workspace scopes all resources (principals, policies, mandates) to a team or project."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Field"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Name"}),(0,i.jsx)(n.td,{children:"Human-readable workspace name"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Slug"}),(0,i.jsx)(n.td,{children:"URL-safe identifier"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Description"}),(0,i.jsx)(n.td,{children:"Purpose of the workspace"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"After creation, all operations are scoped to this workspace."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"Step-2-Register-Principals",children:"Step 2: Register Principals"}),"\n",(0,i.jsx)(n.p,{children:"Register every entity that participates in the authority system."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Principal Type"}),(0,i.jsx)(n.th,{children:"Use Case"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Agent"})}),(0,i.jsx)(n.td,{children:"An AI agent that makes external API calls"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"User"})}),(0,i.jsx)(n.td,{children:"A human who manages or oversees agents"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Service"})}),(0,i.jsx)(n.td,{children:"A backend service that needs authority validation"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"Via-SDK",children:"Via SDK"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from caracal.enterprise.sdk import EnterpriseClient\n\nclient = EnterpriseClient(\n    base_url="https://enterprise.caracal.example.com",\n    api_key="your-enterprise-api-key"\n)\n\nprincipal = client.register_principal(\n    name="my-agent",\n    principal_type="agent",\n    workspace_slug="my-team",\n    metadata={"environment": "production"}\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"Via-Dashboard",children:"Via Dashboard"}),"\n",(0,i.jsxs)(n.p,{children:["Navigate to ",(0,i.jsx)(n.strong,{children:"Principals"})," and select ",(0,i.jsx)(n.strong,{children:"Register New Principal"}),". Fill in the required fields and submit."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"Step-3-Define-Authority-Policies",children:"Step 3: Define Authority Policies"}),"\n",(0,i.jsx)(n.p,{children:"Policies govern what mandates can be issued to a principal."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Policy Field"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Principal"}),(0,i.jsx)(n.td,{children:"Target principal"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Allowed Resources"}),(0,i.jsxs)(n.td,{children:["Resource patterns (supports wildcards: ",(0,i.jsx)(n.code,{children:"api:external/*"}),")"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Allowed Actions"}),(0,i.jsx)(n.td,{children:"Permitted actions (read, write, execute)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Max Validity"}),(0,i.jsx)(n.td,{children:"Maximum mandate duration in seconds"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Delegation Depth"}),(0,i.jsx)(n.td,{children:"How many levels of delegation are permitted"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"Via-SDK-1",children:"Via SDK"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'policy = client.create_policy(\n    principal_id=principal["principal_id"],\n    allowed_resources=["api:external/*", "db:analytics/*"],\n    allowed_actions=["read", "execute"],\n    max_validity_seconds=86400,\n    delegation_depth=2\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"Via-Dashboard-1",children:"Via Dashboard"}),"\n",(0,i.jsxs)(n.p,{children:["Navigate to ",(0,i.jsx)(n.strong,{children:"Policies"}),", select the target principal, and define the rules."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"Step-4-Deploy-Gateway-with-Enterprise-Sync",children:"Step 4: Deploy Gateway with Enterprise Sync"}),"\n",(0,i.jsx)(n.p,{children:"The Caracal Gateway enforces mandates at the network level. Enterprise Sync keeps it in alignment with the Enterprise control plane."}),"\n",(0,i.jsx)(n.h3,{id:"Docker-Compose",children:"Docker Compose"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"services:\n  gateway:\n    image: caracal-gateway:latest\n    environment:\n      ENTERPRISE_URL: https://enterprise.caracal.example.com\n      ENTERPRISE_API_KEY: your-key\n      ENTERPRISE_WORKSPACE: my-team\n      ENTERPRISE_SYNC_INTERVAL: 30\n"})}),"\n",(0,i.jsx)(n.h3,{id:"Verify-Sync",children:"Verify Sync"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Check sync status\ncurl http://localhost:8443/health | jq \'.enterprise_sync\'\n\n# Expected output:\n# {\n#   "connected": true,\n#   "last_sync": "2024-01-15T10:30:00Z",\n#   "policies_synced": 12\n# }\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"Step-5-Agents-Use-Mandates",children:"Step 5: Agents Use Mandates"}),"\n",(0,i.jsx)(n.p,{children:"Once policies are defined and the Gateway is deployed, agents request mandates before performing actions."}),"\n",(0,i.jsx)(n.h3,{id:"Request-and-Validate",children:"Request and Validate"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from caracal.sdk import AuthorityClient\n\nclient = AuthorityClient(\n    base_url="https://gateway.example.com",\n    api_key="agent-api-key"\n)\n\n# Request a mandate\nmandate = client.request_mandate(\n    issuer_id="<issuer-principal-id>",\n    subject_id="<agent-principal-id>",\n    resource_scope=["api:external/openai"],\n    action_scope=["execute"],\n    validity_seconds=3600\n)\n\n# Validate before execution\nvalidation = client.validate_mandate(\n    mandate_id=mandate["mandate_id"],\n    requested_action="execute",\n    requested_resource="api:external/openai"\n)\n\nif validation["allowed"]:\n    result = call_openai()\n'})}),"\n",(0,i.jsx)(n.h3,{id:"Through-Gateway",children:"Through Gateway"}),"\n",(0,i.jsx)(n.p,{children:"Alternatively, agents route requests through the Gateway, which validates mandates transparently:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://gateway.example.com/api/proxy \\\n  -H "Authorization: Bearer <jwt-token>" \\\n  -H "X-Caracal-Mandate: <mandate-id>" \\\n  -H "X-Caracal-Target-URL: https://api.openai.com/v1/chat/completions" \\\n  -d \'{"model": "gpt-4", "messages": [...]}\'\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"Step-6-Monitor-and-Audit",children:"Step 6: Monitor and Audit"}),"\n",(0,i.jsx)(n.p,{children:"The Enterprise Dashboard provides real-time visibility into authority events."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Dashboard View"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Live Feed"})}),(0,i.jsx)(n.td,{children:"Real-time stream of authority events (issued, validated, denied)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Analytics"})}),(0,i.jsx)(n.td,{children:"Aggregated views of mandate usage and policy compliance"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Audit Log"})}),(0,i.jsx)(n.td,{children:"Searchable, filterable log of all authority events"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Alerts"})}),(0,i.jsx)(n.td,{children:"Configure notifications for anomalous patterns"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"Export-Audit-Data",children:"Export Audit Data"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'events = client.query_events(\n    workspace_slug="my-team",\n    event_type="denied",\n    start_date="2024-01-01",\n    format="json"\n)\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"Common-Workflows",children:"Common Workflows"}),"\n",(0,i.jsx)(n.h3,{id:"Onboarding-a-New-Agent",children:"Onboarding a New Agent"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Register the principal (Dashboard or SDK)"}),"\n",(0,i.jsx)(n.li,{children:"Create an authority policy"}),"\n",(0,i.jsx)(n.li,{children:"Issue initial mandate"}),"\n",(0,i.jsx)(n.li,{children:"Verify the agent can call external APIs through the Gateway"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"Revoking-Authority",children:"Revoking Authority"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'client.revoke_mandate(mandate_id="<mandate-id>")\n'})}),"\n",(0,i.jsxs)(n.p,{children:["All subsequent validation requests for this mandate will return ",(0,i.jsx)(n.code,{children:"denied"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"Delegating-Authority",children:"Delegating Authority"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'delegation = client.delegate_authority(\n    parent_mandate_id="<parent-mandate-id>",\n    child_principal_id="<child-principal-id>",\n    resource_scope=["api:external/subset"],\n    action_scope=["read"],\n    validity_seconds=1800\n)\n'})}),"\n",(0,i.jsx)(n.p,{children:"The child principal receives a scoped mandate that cannot exceed the parent's authority."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"Enterprise-SDK-vs-Core-SDK",children:"Enterprise SDK vs Core SDK"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Feature"}),(0,i.jsx)(n.th,{children:"Core SDK"}),(0,i.jsx)(n.th,{children:"Enterprise SDK"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Authority validation"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Mandate management"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Multi-workspace support"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Centralized policy management"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Analytics and reporting"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"RBAC and SSO"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Yes"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"Troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsxs)(r,{children:[(0,i.jsx)("summary",{children:"Enterprise Sync not connecting"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Check connectivity\ncurl https://enterprise.caracal.example.com/health\n\n# Verify API key\ncurl -H "Authorization: Bearer <key>" \\\n  https://enterprise.caracal.example.com/api/v1/workspaces\n\n# Check Gateway logs\ndocker-compose logs -f gateway | grep "enterprise_sync"\n'})})]}),"\n",(0,i.jsxs)(r,{children:[(0,i.jsx)("summary",{children:"Principal not syncing"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Verify the principal is registered in the correct workspace"}),"\n",(0,i.jsxs)(n.li,{children:["Check that the Gateway's ",(0,i.jsx)(n.code,{children:"ENTERPRISE_WORKSPACE"})," matches the workspace slug"]}),"\n",(0,i.jsxs)(n.li,{children:["Force a sync: ",(0,i.jsx)(n.code,{children:"POST http://localhost:8443/admin/sync"})]}),"\n"]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"Contact",children:"Contact"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Enterprise Sales:"})," ",(0,i.jsx)(n.a,{href:"https://cal.com/rawx18/caracal-enterprise-sales",children:"Book a Call"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Open Source Support:"})," ",(0,i.jsx)(n.a,{href:"https://cal.com/rawx18/open-source",children:"Book a Call"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453(e,n,r){r.d(n,{R:()=>s,x:()=>l});var t=r(6540);const i={},a=t.createContext(i);function s(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);