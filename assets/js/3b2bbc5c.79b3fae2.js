"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2113],{7793(e,n,a){a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"caracalEnterprise/guides/sdkIntegration","title":"SDK Integration","description":"Integrate Caracal\'s authority enforcement directly into your Python applications using the Caracal SDK.","source":"@site/docs/caracalEnterprise/guides/sdkIntegration.md","sourceDirName":"caracalEnterprise/guides","slug":"/caracalEnterprise/guides/sdkIntegration","permalink":"/caracalEnterprise/guides/sdkIntegration","draft":false,"unlisted":false,"editUrl":"https://github.com/Garudex-Labs/Caracal/tree/main/docs/docs/caracalEnterprise/guides/sdkIntegration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"caracalSidebar","previous":{"title":"Setup Guide","permalink":"/caracalEnterprise/gettingStarted/setup"},"next":{"title":"Gateway Deployment","permalink":"/caracalEnterprise/guides/gatewayDeployment"}}');var i=a(4848),r=a(8453);const s={},o="SDK Integration",d={},l=[{value:"Overview",id:"Overview",level:2},{value:"Connecting to Caracal Enterprise",id:"Connecting-to-Caracal-Enterprise",level:2},{value:"Requesting a Mandate",id:"Requesting-a-Mandate",level:2},{value:"Validating a Mandate",id:"Validating-a-Mandate",level:2},{value:"Error Handling",id:"Error-Handling",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"SDK-Integration",children:"SDK Integration"})}),"\n",(0,i.jsx)(n.p,{children:"Integrate Caracal's authority enforcement directly into your Python applications using the Caracal SDK."}),"\n",(0,i.jsx)(n.h2,{id:"Overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["The SDK provides a ",(0,i.jsx)(n.code,{children:"AuthorityClient"})," class that allows your application to:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Request Mandates"}),"\n",(0,i.jsx)(n.li,{children:"Validate Mandates"}),"\n",(0,i.jsx)(n.li,{children:"Manage Principals and Policies"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"Connecting-to-Caracal-Enterprise",children:"Connecting to Caracal Enterprise"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"AuthorityClient"})," requires your Enterprise URL and an API Key."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import os\nfrom caracal.sdk import AuthorityClient\n\nclient = AuthorityClient(\n    base_url=os.environ["CARACAL_AUTHORITY_URL"],\n    api_key=os.environ.get("CARACAL_API_KEY"),\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"Requesting-a-Mandate",children:"Requesting a Mandate"}),"\n",(0,i.jsx)(n.p,{children:"Before performing any action that requires authority, your agent must request a mandate. A mandate is a time-bound token granting permission to perform specific actions on specific resources."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Issue a mandate\nmandate = client.request_mandate(\n    issuer_id="<issuer-principal-id>",\n    subject_id="<subject-principal-id>",\n    resource_scope=["api:external/*"],\n    action_scope=["read", "write"],\n    validity_seconds=3600,  # Valid for 1 hour\n    intent={\n        "purpose": "External API integration",\n        "requested_by": "user@example.com"\n    }\n)\n\nprint(f"Mandate issued: {mandate[\'mandate_id\']}")\nprint(f"Valid until: {mandate[\'valid_until\']}")\n'})}),"\n",(0,i.jsx)(n.h2,{id:"Validating-a-Mandate",children:"Validating a Mandate"}),"\n",(0,i.jsxs)(n.p,{children:["Within your critical execution paths, ",(0,i.jsx)(n.strong,{children:"always"})," validate the mandate before proceeding."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def execute_external_api_call(mandate_id: str, endpoint: str):\n    # ALWAYS validate mandate before execution\n    validation = client.validate_mandate(\n        mandate_id=mandate_id,\n        requested_action="read",\n        requested_resource=f"api:external/{endpoint}"\n    )\n    \n    if not validation["allowed"]:\n        raise PermissionError(\n            f"Authority denied: {validation[\'denial_reason\']}"\n        )\n    \n    # Authority validated - proceed with execution\n    result = make_api_call(endpoint)\n    return result\n'})}),"\n",(0,i.jsx)(n.h2,{id:"Error-Handling",children:"Error Handling"}),"\n",(0,i.jsx)(n.p,{children:"The SDK raises specific exceptions for common issues:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"AuthenticationError"}),": Invalid API key."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"PermissionError"}),": The requested action is not allowed by policy."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ConnectionError"}),": Cannot reach the Caracal Enterprise server."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,n,a){a.d(n,{R:()=>s,x:()=>o});var t=a(6540);const i={},r=t.createContext(i);function s(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);