"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[851],{7329(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"caracalCore/apiReference/sdkClient","title":"SDK Client","description":"Python SDK for integrating authority enforcement into AI agent applications.","source":"@site/docs/caracalCore/apiReference/sdkClient.md","sourceDirName":"caracalCore/apiReference","slug":"/caracalCore/apiReference/sdkClient","permalink":"/caracalCore/apiReference/sdkClient","draft":false,"unlisted":false,"editUrl":"https://github.com/Garudex-Labs/Caracal/tree/main/docs/docs/caracalCore/apiReference/sdkClient.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"SDK Client"},"sidebar":"caracalSidebar","previous":{"title":"Key Commands","permalink":"/caracalCore/cliReference/keys"},"next":{"title":"MCP Adapter for Caracal Core","permalink":"/caracalCore/apiReference/mcpIntegration"}}');var r=i(4848),d=i(8453);const s={sidebar_position:1,title:"SDK Client"},a="Caracal SDK",l={},c=[{value:"Installation",id:"Installation",level:2},{value:"Quick Start",id:"Quick-Start",level:2},{value:"Configuration",id:"Configuration",level:2},{value:"Configuration File",id:"Configuration-File",level:3},{value:"Custom Configuration Path",id:"Custom-Configuration-Path",level:3},{value:"Environment Variables",id:"Environment-Variables",level:3},{value:"API Reference",id:"API-Reference",level:2},{value:"AuthorityClient",id:"AuthorityClient",level:3},{value:"Constructor",id:"Constructor",level:4},{value:"Methods Overview",id:"Methods-Overview",level:3},{value:"request_mandate",id:"request_mandate",level:3},{value:"validate_mandate",id:"validate_mandate",level:3},{value:"register_principal",id:"register_principal",level:3},{value:"create_policy",id:"create_policy",level:3},{value:"Fail-Closed Semantics",id:"Fail-Closed-Semantics",level:2},{value:"Error Handling",id:"Error-Handling",level:2},{value:"Integration Examples",id:"Integration-Examples",level:2},{value:"See Also",id:"See-Also",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"Caracal-SDK",children:"Caracal SDK"})}),"\n",(0,r.jsx)(n.p,{children:"Python SDK for integrating authority enforcement into AI agent applications."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"Installation",children:"Installation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pip install caracal-core\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"Quick-Start",children:"Quick Start"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from caracal.sdk import AuthorityClient\n\nclient = AuthorityClient(\n    base_url="https://your-caracal-instance.example.com",\n    api_key="your-api-key"\n)\n\n# Request a mandate\nmandate = client.request_mandate(\n    issuer_id="<issuer-principal-id>",\n    subject_id="<subject-principal-id>",\n    resource_scope=["api:external/*"],\n    action_scope=["read"],\n    validity_seconds=3600\n)\n\n# Validate mandate before execution\nvalidation = client.validate_mandate(\n    mandate_id=mandate["mandate_id"],\n    requested_action="read",\n    requested_resource="api:external/data"\n)\n\nif validation["allowed"]:\n    result = call_external_api()\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"Configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"Configuration-File",children:"Configuration File"}),"\n",(0,r.jsxs)(n.p,{children:["Default location: ",(0,r.jsx)(n.code,{children:"~/.caracal/config.yaml"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"storage:\n  agent_registry: ~/.caracal/agents.json\n  policy_store: ~/.caracal/policies.json\n  ledger: ~/.caracal/ledger.jsonl\n  backup_dir: ~/.caracal/backups\n  backup_count: 3\n\nlogging:\n  level: INFO\n  file: ~/.caracal/caracal.log\n"})}),"\n",(0,r.jsx)(n.h3,{id:"Custom-Configuration-Path",children:"Custom Configuration Path"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'client = AuthorityClient(config_path="/etc/caracal/config.yaml")\n'})}),"\n",(0,r.jsx)(n.h3,{id:"Environment-Variables",children:"Environment Variables"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Variable"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"CARACAL_CONFIG"})}),(0,r.jsx)(n.td,{children:"Override default config path"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"CARACAL_AUTHORITY_URL"})}),(0,r.jsx)(n.td,{children:"Authority enforcement backend URL"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"CARACAL_API_KEY"})}),(0,r.jsx)(n.td,{children:"API key for authentication"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"API-Reference",children:"API Reference"}),"\n",(0,r.jsx)(n.h3,{id:"AuthorityClient",children:"AuthorityClient"}),"\n",(0,r.jsx)(n.p,{children:"Main SDK client class."}),"\n",(0,r.jsx)(n.h4,{id:"Constructor",children:"Constructor"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"AuthorityClient(\n    base_url: Optional[str] = None,\n    api_key: Optional[str] = None,\n    config_path: Optional[str] = None\n)\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"base_url"})}),(0,r.jsx)(n.td,{children:"str"}),(0,r.jsx)(n.td,{children:"env var"}),(0,r.jsx)(n.td,{children:"Caracal authority URL"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"api_key"})}),(0,r.jsx)(n.td,{children:"str"}),(0,r.jsx)(n.td,{children:"env var"}),(0,r.jsx)(n.td,{children:"API key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"config_path"})}),(0,r.jsx)(n.td,{children:"str"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"~/.caracal/config.yaml"})}),(0,r.jsx)(n.td,{children:"Path to configuration file"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"Methods-Overview",children:"Methods Overview"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Method"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Returns"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"request_mandate()"})}),(0,r.jsx)(n.td,{children:"Issue a new execution mandate"}),(0,r.jsx)(n.td,{children:"Dict"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"validate_mandate()"})}),(0,r.jsx)(n.td,{children:"Validate a mandate for an action"}),(0,r.jsx)(n.td,{children:"Dict"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"revoke_mandate()"})}),(0,r.jsx)(n.td,{children:"Revoke an existing mandate"}),(0,r.jsx)(n.td,{children:"None"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"register_principal()"})}),(0,r.jsx)(n.td,{children:"Register a new principal"}),(0,r.jsx)(n.td,{children:"Dict"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"create_policy()"})}),(0,r.jsx)(n.td,{children:"Create an authority policy"}),(0,r.jsx)(n.td,{children:"Dict"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"health_check()"})}),(0,r.jsx)(n.td,{children:"Check connection status"}),(0,r.jsx)(n.td,{children:"Dict"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"request_mandate",children:"request_mandate"}),"\n",(0,r.jsx)(n.p,{children:"Issue a new execution mandate for a principal."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"request_mandate(\n    issuer_id: str,\n    subject_id: str,\n    resource_scope: List[str],\n    action_scope: List[str],\n    validity_seconds: int,\n    intent: Optional[Dict] = None\n) -> Dict\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"issuer_id"})}),(0,r.jsx)(n.td,{children:"str"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,r.jsx)(n.td,{children:"Principal issuing the mandate"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"subject_id"})}),(0,r.jsx)(n.td,{children:"str"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,r.jsx)(n.td,{children:"Principal receiving the mandate"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"resource_scope"})}),(0,r.jsx)(n.td,{children:"List[str]"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,r.jsx)(n.td,{children:"Resources the mandate grants access to"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"action_scope"})}),(0,r.jsx)(n.td,{children:"List[str]"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,r.jsx)(n.td,{children:"Actions the mandate permits"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"validity_seconds"})}),(0,r.jsx)(n.td,{children:"int"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,r.jsx)(n.td,{children:"How long the mandate is valid"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"intent"})}),(0,r.jsx)(n.td,{children:"Dict"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"No"}),(0,r.jsx)(n.td,{children:"Declared purpose for the mandate"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," Dictionary with ",(0,r.jsx)(n.code,{children:"mandate_id"}),", ",(0,r.jsx)(n.code,{children:"valid_until"}),", ",(0,r.jsx)(n.code,{children:"signature"}),"."]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'mandate = client.request_mandate(\n    issuer_id="<issuer-principal-id>",\n    subject_id="<agent-principal-id>",\n    resource_scope=["api:external/*"],\n    action_scope=["read", "write"],\n    validity_seconds=3600,\n    intent={\n        "purpose": "External API integration",\n        "requested_by": "user@example.com"\n    }\n)\n\nprint(f"Mandate issued: {mandate[\'mandate_id\']}")\nprint(f"Valid until: {mandate[\'valid_until\']}")\n'})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"validate_mandate",children:"validate_mandate"}),"\n",(0,r.jsx)(n.p,{children:"Validate a mandate for a specific action on a specific resource."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"validate_mandate(\n    mandate_id: str,\n    requested_action: str,\n    requested_resource: str\n) -> Dict\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"mandate_id"})}),(0,r.jsx)(n.td,{children:"str"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,r.jsx)(n.td,{children:"The mandate to validate"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"requested_action"})}),(0,r.jsx)(n.td,{children:"str"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,r.jsx)(n.td,{children:"Action being requested"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"requested_resource"})}),(0,r.jsx)(n.td,{children:"str"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,r.jsx)(n.td,{children:"Resource being accessed"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," Dictionary with ",(0,r.jsx)(n.code,{children:"allowed"})," (bool), ",(0,r.jsx)(n.code,{children:"denial_reason"})," (str, if denied)."]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'def execute_api_call(mandate_id: str, endpoint: str):\n    validation = client.validate_mandate(\n        mandate_id=mandate_id,\n        requested_action="read",\n        requested_resource=f"api:external/{endpoint}"\n    )\n\n    if not validation["allowed"]:\n        raise PermissionError(\n            f"Authority denied: {validation[\'denial_reason\']}"\n        )\n\n    # Authority validated -- proceed\n    return make_api_call(endpoint)\n'})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"register_principal",children:"register_principal"}),"\n",(0,r.jsx)(n.p,{children:"Register a new principal in the system."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"register_principal(\n    name: str,\n    principal_type: str,\n    metadata: Optional[Dict] = None\n) -> Dict\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"name"})}),(0,r.jsx)(n.td,{children:"str"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,r.jsx)(n.td,{children:"Human-readable name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"principal_type"})}),(0,r.jsx)(n.td,{children:"str"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,r.jsx)(n.td,{children:"agent, user, or service"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"metadata"})}),(0,r.jsx)(n.td,{children:"Dict"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"No"}),(0,r.jsx)(n.td,{children:"Additional context"})]})]})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'principal = client.register_principal(\n    name="my-ai-agent",\n    principal_type="agent",\n    metadata={\n        "description": "Main AI agent",\n        "environment": "production"\n    }\n)\n\nprint(f"Principal registered: {principal[\'principal_id\']}")\n'})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"create_policy",children:"create_policy"}),"\n",(0,r.jsx)(n.p,{children:"Create an authority policy for a principal."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"create_policy(\n    principal_id: str,\n    allowed_resource_patterns: List[str],\n    allowed_actions: List[str],\n    max_validity_seconds: int = 86400,\n    delegation_depth: int = 0\n) -> Dict\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"principal_id"})}),(0,r.jsx)(n.td,{children:"str"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,r.jsx)(n.td,{children:"Target principal"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"allowed_resource_patterns"})}),(0,r.jsx)(n.td,{children:"List[str]"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,r.jsx)(n.td,{children:"Resource patterns (wildcards supported)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"allowed_actions"})}),(0,r.jsx)(n.td,{children:"List[str]"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Yes"}),(0,r.jsx)(n.td,{children:"Permitted actions"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"max_validity_seconds"})}),(0,r.jsx)(n.td,{children:"int"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"No"}),(0,r.jsx)(n.td,{children:"Maximum mandate validity"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"delegation_depth"})}),(0,r.jsx)(n.td,{children:"int"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"No"}),(0,r.jsx)(n.td,{children:"Maximum delegation depth"})]})]})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'policy = client.create_policy(\n    principal_id="<principal-id>",\n    allowed_resource_patterns=[\n        "api:external/*",\n        "db:read-only/*"\n    ],\n    allowed_actions=["read", "write", "execute"],\n    max_validity_seconds=86400,\n    delegation_depth=2\n)\n'})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"Fail-Closed-Semantics",children:"Fail-Closed Semantics"}),"\n",(0,r.jsx)(n.p,{children:"The SDK implements fail-closed behavior. If authority cannot be verified, actions are denied."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Scenario"}),(0,r.jsx)(n.th,{children:"Behavior"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Initialization failure"}),(0,r.jsxs)(n.td,{children:["Raises ",(0,r.jsx)(n.code,{children:"ConnectionError"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Mandate validation failure"}),(0,r.jsxs)(n.td,{children:["Returns ",(0,r.jsx)(n.code,{children:'{"allowed": false}'})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Missing policy"}),(0,r.jsxs)(n.td,{children:["Returns ",(0,r.jsx)(n.code,{children:'{"allowed": false}'})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Any unexpected error"}),(0,r.jsx)(n.td,{children:"Deny / raise exception"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"Error-Handling",children:"Error Handling"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Error handling example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from caracal.sdk import AuthorityClient\n\ntry:\n    client = AuthorityClient()\nexcept ConnectionError as e:\n    print(f"Connection error: {e}")\n\ntry:\n    validation = client.validate_mandate(\n        mandate_id="mandate-uuid",\n        requested_action="read",\n        requested_resource="api:external/data"\n    )\n    if not validation["allowed"]:\n        print(f"Denied: {validation[\'denial_reason\']}")\nexcept Exception as e:\n    print(f"Authority check failed: {e}")\n'})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"Integration-Examples",children:"Integration Examples"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"OpenAI integration"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from caracal.sdk import AuthorityClient\n\nclient = AuthorityClient()\n\ndef chat_with_authority(messages, mandate_id: str):\n    # Validate authority before calling external API\n    validation = client.validate_mandate(\n        mandate_id=mandate_id,\n        requested_action="execute",\n        requested_resource="api:openai/chat"\n    )\n\n    if not validation["allowed"]:\n        raise PermissionError(\n            f"Authority denied: {validation[\'denial_reason\']}"\n        )\n\n    import openai\n    response = openai.ChatCompletion.create(\n        model="gpt-4",\n        messages=messages\n    )\n\n    return response.choices[0].message.content\n'})})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"LangChain integration"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from langchain.callbacks.base import BaseCallbackHandler\nfrom caracal.sdk import AuthorityClient\n\nclass CaracalAuthorityCallback(BaseCallbackHandler):\n    def __init__(self, mandate_id: str):\n        self.client = AuthorityClient()\n        self.mandate_id = mandate_id\n\n    def on_llm_start(self, serialized, prompts, **kwargs):\n        validation = self.client.validate_mandate(\n            mandate_id=self.mandate_id,\n            requested_action="execute",\n            requested_resource="api:openai/chat"\n        )\n        if not validation["allowed"]:\n            raise PermissionError(\n                f"Authority denied: {validation[\'denial_reason\']}"\n            )\n'})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"See-Also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/caracalCore/apiReference/mcpIntegration",children:"MCP Integration"})," -- Model Context Protocol"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/caracalCore/cliReference/",children:"CLI Reference"})," -- Command-line tools"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453(e,n,i){i.d(n,{R:()=>s,x:()=>a});var t=i(6540);const r={},d=t.createContext(r);function s(e){const n=t.useContext(d);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(d.Provider,{value:n},e.children)}}}]);