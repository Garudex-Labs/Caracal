"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[7235],{8746(e,a,n){n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"caracalCore/gettingStarted/quickstart","title":"Quickstart Guide","description":"Get the Caracal Gateway Proxy running in 5 minutes.","source":"@site/docs/caracalCore/gettingStarted/quickstart.md","sourceDirName":"caracalCore/gettingStarted","slug":"/caracalCore/gettingStarted/quickstart","permalink":"/caracalCore/gettingStarted/quickstart","draft":false,"unlisted":false,"editUrl":"https://github.com/Garudex-Labs/Caracal/tree/main/docs/docs/caracalCore/gettingStarted/quickstart.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Quickstart Guide"},"sidebar":"caracalSidebar","previous":{"title":"Installation","permalink":"/caracalCore/gettingStarted/installation"},"next":{"title":"Architecture","permalink":"/caracalCore/concepts/architecture"}}');var r=n(4848),s=n(8453);const i={sidebar_position:2,title:"Quickstart Guide"},c="Docker Quickstart Guide",l={},o=[{value:"Prerequisites",id:"Prerequisites",level:2},{value:"Quick Start (Development)",id:"Quick-Start-Development",level:2},{value:"1. Clone and Navigate",id:"1-Clone-and-Navigate",level:3},{value:"2. Create Environment File",id:"2-Create-Environment-File",level:3},{value:"3. Build and Start",id:"3-Build-and-Start",level:3},{value:"4. Verify",id:"4-Verify",level:3},{value:"Initialize and Test",id:"Initialize-and-Test",level:2},{value:"Initialize Database",id:"Initialize-Database",level:3},{value:"Register a Principal",id:"Register-a-Principal",level:3},{value:"Create an Authority Policy",id:"Create-an-Authority-Policy",level:3},{value:"Prepare TLS Certificates",id:"Prepare-TLS-Certificates",level:3},{value:"Generate Self-Signed Certificates (Development Only)",id:"Generate-Self-Signed-Certificates-Development-Only",level:3},{value:"Verify TLS",id:"Verify-TLS",level:3},{value:"Generate JWT Token",id:"Generate-JWT-Token",level:3},{value:"Make Request Through Gateway",id:"Make-Request-Through-Gateway",level:3},{value:"Monitoring",id:"Monitoring",level:2},{value:"Common Commands",id:"Common-Commands",level:2},{value:"Gateway won&#39;t start",id:"Gateway-wont-start",level:3},{value:"Database connection failed",id:"Database-connection-failed",level:3},{value:"Port already in use",id:"Port-already-in-use",level:3},{value:"Next Steps",id:"Next-Steps",level:2}];function d(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components},{Details:n}=a;return n||function(e,a){throw new Error("Expected "+(a?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"Docker-Quickstart-Guide",children:"Docker Quickstart Guide"})}),"\n",(0,r.jsx)(a.p,{children:"Get the Caracal Gateway Proxy running in 5 minutes."}),"\n",(0,r.jsx)(a.h2,{id:"Prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Docker 20.10+"}),"\n",(0,r.jsx)(a.li,{children:"Docker Compose 1.29+"}),"\n",(0,r.jsx)(a.li,{children:"2GB RAM minimum"}),"\n"]}),"\n",(0,r.jsx)(a.h2,{id:"Quick-Start-Development",children:"Quick Start (Development)"}),"\n",(0,r.jsx)(a.h3,{id:"1-Clone-and-Navigate",children:"1. Clone and Navigate"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"cd Caracal\n"})}),"\n",(0,r.jsx)(a.h3,{id:"2-Create-Environment-File",children:"2. Create Environment File"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"cp .env.gateway.example .env\n"})}),"\n",(0,r.jsxs)(a.p,{children:["Edit ",(0,r.jsx)(a.code,{children:".env"})," and set a secure password:"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"DB_PASSWORD=your_secure_password_here\n"})}),"\n",(0,r.jsx)(a.h3,{id:"3-Build-and-Start",children:"3. Build and Start"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"docker build -f Dockerfile.gateway -t caracal-gateway:latest .\ndocker-compose -f docker-compose.gateway.yml up -d\n"})}),"\n",(0,r.jsx)(a.h3,{id:"4-Verify",children:"4. Verify"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"curl http://localhost:8443/health\ndocker-compose -f docker-compose.gateway.yml logs -f gateway\n"})}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)(a.h2,{id:"Initialize-and-Test",children:"Initialize and Test"}),"\n",(0,r.jsx)(a.h3,{id:"Initialize-Database",children:"Initialize Database"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"docker-compose -f docker-compose.gateway.yml exec gateway caracal db migrate up\n"})}),"\n",(0,r.jsx)(a.h3,{id:"Register-a-Principal",children:"Register a Principal"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"docker-compose -f docker-compose.gateway.yml exec gateway caracal agent register \\\n  --name test-agent \\\n  --owner admin\n"})}),"\n",(0,r.jsx)(a.h3,{id:"Create-an-Authority-Policy",children:"Create an Authority Policy"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:'docker-compose -f docker-compose.gateway.yml exec gateway caracal policy create \\\n  --agent-name test-agent \\\n  --resources "api:*" \\\n  --actions "read" "write" \\\n  --max-validity 86400\n'})}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Production setup with TLS"}),(0,r.jsx)(a.h3,{id:"Prepare-TLS-Certificates",children:"Prepare TLS Certificates"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"mkdir -p certs\n"})}),(0,r.jsx)(a.p,{children:"Required files:"}),(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.code,{children:"certs/server.crt"})," -- Server TLS certificate"]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.code,{children:"certs/server.key"})," -- Server TLS private key"]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.code,{children:"certs/ca.crt"})," -- CA certificate (for mTLS)"]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.code,{children:"certs/jwt_public.pem"})," -- JWT public key"]}),"\n"]}),(0,r.jsx)(a.h3,{id:"Generate-Self-Signed-Certificates-Development-Only",children:"Generate Self-Signed Certificates (Development Only)"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:'# Generate CA\nopenssl req -x509 -newkey rsa:4096 -keyout certs/ca.key \\\n  -out certs/ca.crt -days 365 -nodes -subj "/CN=Caracal CA"\n\n# Generate server certificate\nopenssl req -newkey rsa:4096 -keyout certs/server.key \\\n  -out certs/server.csr -nodes -subj "/CN=localhost"\nopenssl x509 -req -in certs/server.csr -CA certs/ca.crt \\\n  -CAkey certs/ca.key -CAcreateserial -out certs/server.crt -days 365\n\n# Generate JWT key pair\nopenssl genrsa -out certs/jwt_private.pem 4096\nopenssl rsa -in certs/jwt_private.pem -pubout -out certs/jwt_public.pem\n\nchmod 600 certs/*.key certs/*.pem\n'})}),(0,r.jsx)(a.h3,{id:"Verify-TLS",children:"Verify TLS"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"curl -k https://localhost:8443/health\ncurl http://localhost:9090/metrics\n"})})]}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Testing with JWT tokens"}),(0,r.jsx)(a.h3,{id:"Generate-JWT-Token",children:"Generate JWT Token"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-python",children:"# test_jwt.py\nimport jwt\nfrom datetime import datetime, timedelta\n\nwith open('certs/jwt_private.pem', 'r') as f:\n    private_key = f.read()\n\npayload = {\n    'iss': 'caracal-core',\n    'sub': 'test-principal-id',\n    'aud': 'caracal-gateway',\n    'exp': datetime.utcnow() + timedelta(hours=1),\n    'iat': datetime.utcnow(),\n    'principal_id': 'test-principal-id'\n}\n\ntoken = jwt.encode(payload, private_key, algorithm='RS256')\nprint(token)\n"})}),(0,r.jsx)(a.h3,{id:"Make-Request-Through-Gateway",children:"Make Request Through Gateway"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:'TOKEN="your-jwt-token-here"\n\ncurl -k -X POST https://localhost:8443/api/test \\\n  -H "Authorization: Bearer $TOKEN" \\\n  -H "X-Caracal-Target-URL: https://httpbin.org/post" \\\n  -H "X-Caracal-Nonce: $(uuidgen)" \\\n  -H "X-Caracal-Timestamp: $(date +%s)" \\\n  -H "Content-Type: application/json" \\\n  -d \'{"test": "data"}\'\n'})})]}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)(a.h2,{id:"Monitoring",children:"Monitoring"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"# Gateway logs\ndocker-compose -f docker-compose.gateway.yml logs -f gateway\n\n# Prometheus metrics\ncurl http://localhost:9090/metrics\n\n# Health endpoint\ncurl http://localhost:8443/health | jq\n"})}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)(a.h2,{id:"Common-Commands",children:"Common Commands"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"docker-compose -f docker-compose.gateway.yml up -d       # Start\ndocker-compose -f docker-compose.gateway.yml down         # Stop\ndocker-compose -f docker-compose.gateway.yml restart gateway  # Restart\ndocker-compose -f docker-compose.gateway.yml logs -f      # Logs\ndocker-compose -f docker-compose.gateway.yml down -v      # Clean up\n"})}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Troubleshooting"}),(0,r.jsx)(a.h3,{id:"Gateway-wont-start",children:"Gateway won't start"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"docker-compose -f docker-compose.gateway.yml logs gateway\n# Common: Database not ready, TLS cert missing, JWT key missing\n"})}),(0,r.jsx)(a.h3,{id:"Database-connection-failed",children:"Database connection failed"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:'docker-compose -f docker-compose.gateway.yml ps postgres\ndocker-compose -f docker-compose.gateway.yml exec postgres \\\n  psql -U caracal -d caracal -c "SELECT 1"\n'})}),(0,r.jsx)(a.h3,{id:"Port-already-in-use",children:"Port already in use"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"# Change ports in .env\nGATEWAY_PORT=8444\nMETRICS_PORT=9091\n"})})]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Performance tuning"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"# .env\nDB_POOL_SIZE=20\nDB_MAX_OVERFLOW=10\nPOLICY_CACHE_MAX_SIZE=50000\nPOLICY_CACHE_TTL=120\n"})}),(0,r.jsx)(a.p,{children:"Scale gateway instances:"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"docker-compose -f docker-compose.gateway.yml up -d --scale gateway=3\n"})})]}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)(a.h2,{id:"Next-Steps",children:"Next Steps"}),"\n",(0,r.jsxs)(a.ol,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.a,{href:"../deployment/production",children:"Production Deployment"})," -- Full production setup"]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.a,{href:"../deployment/kubernetes",children:"Kubernetes"})," -- Container orchestration"]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.a,{href:"../apiReference/sdkClient",children:"SDK Reference"})," -- Integrate authority checks into your code"]}),"\n"]})]})}function h(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,a,n){n.d(a,{R:()=>i,x:()=>c});var t=n(6540);const r={},s=t.createContext(r);function i(e){const a=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function c(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(s.Provider,{value:a},e.children)}}}]);