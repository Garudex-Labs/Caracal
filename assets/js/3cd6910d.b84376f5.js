"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2421],{8283(e,r,n){n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>d,default:()=>o,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"caracalCore/cliReference/backup","title":"Backup Commands","description":"The backup command group manages backup and restore operations.","source":"@site/docs/caracalCore/cliReference/backup.md","sourceDirName":"caracalCore/cliReference","slug":"/caracalCore/cliReference/backup","permalink":"/caracalCore/cliReference/backup","draft":false,"unlisted":false,"editUrl":"https://github.com/Garudex-Labs/Caracal/tree/main/docs/docs/caracalCore/cliReference/backup.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9,"title":"Backup Commands"},"sidebar":"caracalSidebar","previous":{"title":"Resource Registry","permalink":"/caracalCore/cliReference/pricebook"},"next":{"title":"Key Commands","permalink":"/caracalCore/cliReference/keys"}}');var c=n(4848),t=n(8453);const l={sidebar_position:9,title:"Backup Commands"},d="Backup Commands",i={},a=[{value:"Commands Overview",id:"Commands-Overview",level:2},{value:"Backup Contents",id:"Backup-Contents",level:2},{value:"create",id:"create",level:2},{value:"Options",id:"Options",level:3},{value:"Examples",id:"Examples",level:3},{value:"restore",id:"restore",level:2},{value:"Arguments",id:"Arguments",level:3},{value:"Options",id:"Options-1",level:3},{value:"Examples",id:"Examples-1",level:3},{value:"list",id:"list",level:2},{value:"Options",id:"Options-2",level:3},{value:"Examples",id:"Examples-2",level:3},{value:"Backup Schedule",id:"Backup-Schedule",level:2},{value:"Cron Example",id:"Cron-Example",level:3},{value:"See Also",id:"See-Also",level:2}];function h(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components},{Details:n}=r;return n||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.header,{children:(0,c.jsx)(r.h1,{id:"Backup-Commands",children:"Backup Commands"})}),"\n",(0,c.jsxs)(r.p,{children:["The ",(0,c.jsx)(r.code,{children:"backup"})," command group manages backup and restore operations."]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{children:"caracal backup COMMAND [OPTIONS]\n"})}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h2,{id:"Commands-Overview",children:"Commands Overview"}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Command"}),(0,c.jsx)(r.th,{children:"Description"})]})}),(0,c.jsxs)(r.tbody,{children:[(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.a,{href:"#create",children:(0,c.jsx)(r.code,{children:"create"})})}),(0,c.jsx)(r.td,{children:"Create a backup"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.a,{href:"#restore",children:(0,c.jsx)(r.code,{children:"restore"})})}),(0,c.jsx)(r.td,{children:"Restore from backup"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.a,{href:"#list",children:(0,c.jsx)(r.code,{children:"list"})})}),(0,c.jsx)(r.td,{children:"List available backups"})]})]})]}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h2,{id:"Backup-Contents",children:"Backup Contents"}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Component"}),(0,c.jsx)(r.th,{style:{textAlign:"center"},children:"Included"}),(0,c.jsx)(r.th,{children:"Description"})]})}),(0,c.jsxs)(r.tbody,{children:[(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:"Principals"}),(0,c.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,c.jsx)(r.td,{children:"Principal registry"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:"Policies"}),(0,c.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,c.jsx)(r.td,{children:"Authority policies"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:"Resource Registry"}),(0,c.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,c.jsx)(r.td,{children:"Resource registry"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:"Ledger"}),(0,c.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,c.jsx)(r.td,{children:"Authority events"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:"Merkle tree"}),(0,c.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,c.jsx)(r.td,{children:"Integrity proofs"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:"Keys"}),(0,c.jsx)(r.td,{style:{textAlign:"center"},children:"Optional"}),(0,c.jsx)(r.td,{children:"Signing keys (encrypted)"})]})]})]}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h2,{id:"create",children:"create"}),"\n",(0,c.jsx)(r.p,{children:"Create a backup."}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{children:"caracal backup create [OPTIONS]\n"})}),"\n",(0,c.jsx)(r.h3,{id:"Options",children:"Options"}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Option"}),(0,c.jsx)(r.th,{children:"Short"}),(0,c.jsx)(r.th,{children:"Default"}),(0,c.jsx)(r.th,{children:"Description"})]})}),(0,c.jsxs)(r.tbody,{children:[(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"--output"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"-o"})}),(0,c.jsx)(r.td,{children:"auto"}),(0,c.jsx)(r.td,{children:"Output file path"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"--include-keys"})}),(0,c.jsx)(r.td,{}),(0,c.jsx)(r.td,{children:"false"}),(0,c.jsx)(r.td,{children:"Include encryption keys"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"--compress"})}),(0,c.jsx)(r.td,{}),(0,c.jsx)(r.td,{children:"true"}),(0,c.jsx)(r.td,{children:"Compress backup"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"--format"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"-f"})}),(0,c.jsx)(r.td,{children:"tar.gz"}),(0,c.jsx)(r.td,{children:"Format: tar.gz, zip"})]})]})]}),"\n",(0,c.jsx)(r.h3,{id:"Examples",children:"Examples"}),"\n",(0,c.jsxs)(n,{children:[(0,c.jsx)("summary",{children:"Basic Backup"}),(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-bash",children:"caracal backup create\n"})}),(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Output:"})}),(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{children:"Creating backup...\n\nComponents:\n  [OK] principals (125 records)\n  [OK] policies (89 records)\n  [OK] resources (45 entries)\n  [OK] ledger (1,234,567 events)\n  [OK] merkle (committed)\n\nCompressing...\n  [OK] Compressed 2.3 GB -> 456 MB\n\nBackup created: ~/.caracal/backups/backup-2024-01-15T103000Z.tar.gz\nSize: 456 MB\n"})})]}),"\n",(0,c.jsxs)(n,{children:[(0,c.jsx)("summary",{children:"Backup with Keys"}),(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-bash",children:"caracal backup create \\\n  --output /backup/caracal-full.tar.gz \\\n  --include-keys\n"})}),(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Output:"})}),(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{children:"Creating backup...\n\n[WARNING] Including encryption keys in backup.\n          Ensure backup is stored securely.\n\nComponents:\n  [OK] principals (125 records)\n  [OK] policies (89 records)\n  [OK] resources (45 entries)\n  [OK] ledger (1,234,567 events)\n  [OK] merkle (committed)\n  [OK] keys (encrypted with master password)\n\nBackup created: /backup/caracal-full.tar.gz\nSize: 458 MB\n"})})]}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h2,{id:"restore",children:"restore"}),"\n",(0,c.jsx)(r.p,{children:"Restore from backup."}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{children:"caracal backup restore [OPTIONS] FILE\n"})}),"\n",(0,c.jsx)(r.h3,{id:"Arguments",children:"Arguments"}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Argument"}),(0,c.jsx)(r.th,{children:"Description"})]})}),(0,c.jsx)(r.tbody,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:"FILE"}),(0,c.jsx)(r.td,{children:"Path to backup file"})]})})]}),"\n",(0,c.jsx)(r.h3,{id:"Options-1",children:"Options"}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Option"}),(0,c.jsx)(r.th,{children:"Short"}),(0,c.jsx)(r.th,{children:"Default"}),(0,c.jsx)(r.th,{children:"Description"})]})}),(0,c.jsxs)(r.tbody,{children:[(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"--components"})}),(0,c.jsx)(r.td,{}),(0,c.jsx)(r.td,{children:"all"}),(0,c.jsx)(r.td,{children:"Components to restore (comma-separated)"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"--force"})}),(0,c.jsx)(r.td,{}),(0,c.jsx)(r.td,{children:"false"}),(0,c.jsx)(r.td,{children:"Overwrite existing data"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"--dry-run"})}),(0,c.jsx)(r.td,{}),(0,c.jsx)(r.td,{children:"false"}),(0,c.jsx)(r.td,{children:"Preview without restoring"})]})]})]}),"\n",(0,c.jsx)(r.h3,{id:"Examples-1",children:"Examples"}),"\n",(0,c.jsxs)(n,{children:[(0,c.jsx)("summary",{children:"Full Restore"}),(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-bash",children:"caracal backup restore backup-2024-01-15T103000Z.tar.gz --force\n"})}),(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Output:"})}),(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{children:"Restoring from backup...\n\n[WARNING] This will overwrite existing data.\n          Type 'restore' to confirm: restore\n\nExtracting...\n  [OK] Extracted 2.3 GB\n\nRestoring components:\n  [OK] principals (125 records)\n  [OK] policies (89 records)\n  [OK] resources (45 entries)\n  [OK] ledger (1,234,567 events)\n  [OK] merkle (verified)\n\nRestore completed successfully.\n"})})]}),"\n",(0,c.jsxs)(n,{children:[(0,c.jsx)("summary",{children:"Restore Specific Components"}),(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-bash",children:"caracal backup restore backup.tar.gz \\\n  --components agents,policies \\\n  --force\n"})})]}),"\n",(0,c.jsxs)(n,{children:[(0,c.jsx)("summary",{children:"Dry Run"}),(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-bash",children:"caracal backup restore backup.tar.gz --dry-run\n"})}),(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Output:"})}),(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{children:"DRY RUN - No changes will be made\n\nBackup contents:\n  principals: 125 records (would overwrite 125 existing)\n  policies:   89 records (would overwrite 89 existing)\n  resources:  45 entries (would overwrite 45 existing)\n  ledger:     1,234,567 events (would add to existing)\n  merkle:    committed (would rebuild)\n\nTo proceed: remove --dry-run and add --force\n"})})]}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h2,{id:"list",children:"list"}),"\n",(0,c.jsx)(r.p,{children:"List available backups."}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{children:"caracal backup list [OPTIONS]\n"})}),"\n",(0,c.jsx)(r.h3,{id:"Options-2",children:"Options"}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Option"}),(0,c.jsx)(r.th,{children:"Short"}),(0,c.jsx)(r.th,{children:"Default"}),(0,c.jsx)(r.th,{children:"Description"})]})}),(0,c.jsxs)(r.tbody,{children:[(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"--path"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"-p"})}),(0,c.jsx)(r.td,{children:"default"}),(0,c.jsx)(r.td,{children:"Backup directory"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"--format"})}),(0,c.jsx)(r.td,{children:(0,c.jsx)(r.code,{children:"-f"})}),(0,c.jsx)(r.td,{children:"table"}),(0,c.jsx)(r.td,{children:"Output format"})]})]})]}),"\n",(0,c.jsx)(r.h3,{id:"Examples-2",children:"Examples"}),"\n",(0,c.jsxs)(n,{children:[(0,c.jsx)("summary",{children:"List Backups"}),(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-bash",children:"caracal backup list\n"})}),(0,c.jsx)(r.p,{children:(0,c.jsx)(r.strong,{children:"Output:"})}),(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{children:"Available Backups\n=================\n\nDirectory: ~/.caracal/backups/\n\nFilename                                Created              Size      Components\n------------------------------------------------------------------------------------\nbackup-2024-01-15T103000Z.tar.gz        2024-01-15 10:30     456 MB    all\nbackup-2024-01-14T103000Z.tar.gz        2024-01-14 10:30     445 MB    all\nbackup-2024-01-13T103000Z.tar.gz        2024-01-13 10:30     432 MB    all\n\nTotal: 3 backups, 1.33 GB\n"})})]}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h2,{id:"Backup-Schedule",children:"Backup Schedule"}),"\n",(0,c.jsxs)(r.table,{children:[(0,c.jsx)(r.thead,{children:(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.th,{children:"Frequency"}),(0,c.jsx)(r.th,{style:{textAlign:"center"},children:"Recommended"}),(0,c.jsx)(r.th,{children:"Retention"})]})}),(0,c.jsxs)(r.tbody,{children:[(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:"Daily"}),(0,c.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,c.jsx)(r.td,{children:"7 days"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:"Weekly"}),(0,c.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,c.jsx)(r.td,{children:"4 weeks"})]}),(0,c.jsxs)(r.tr,{children:[(0,c.jsx)(r.td,{children:"Monthly"}),(0,c.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,c.jsx)(r.td,{children:"12 months"})]})]})]}),"\n",(0,c.jsx)(r.h3,{id:"Cron-Example",children:"Cron Example"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-bash",children:"# Daily backup at 2 AM\n0 2 * * * caracal backup create --output /backup/daily/caracal-$(date +\\%Y\\%m\\%d).tar.gz\n\n# Weekly backup on Sunday at 3 AM\n0 3 * * 0 caracal backup create --output /backup/weekly/caracal-$(date +\\%Y\\%m\\%d).tar.gz --include-keys\n"})}),"\n",(0,c.jsx)(r.hr,{}),"\n",(0,c.jsx)(r.h2,{id:"See-Also",children:"See Also"}),"\n",(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsxs)(r.li,{children:[(0,c.jsx)(r.a,{href:"./database",children:"Database Commands"})," - Database management"]}),"\n",(0,c.jsxs)(r.li,{children:[(0,c.jsx)(r.a,{href:"./merkle",children:"Merkle Commands"})," - Integrity verification"]}),"\n"]})]})}function o(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,c.jsx)(r,{...e,children:(0,c.jsx)(h,{...e})}):h(e)}},8453(e,r,n){n.d(r,{R:()=>l,x:()=>d});var s=n(6540);const c={},t=s.createContext(c);function l(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:l(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);