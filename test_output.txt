============================= test session starts ==============================
platform linux -- Python 3.14.2, pytest-9.0.2, pluggy-1.6.0 -- /usr/bin/python3
cachedir: .pytest_cache
hypothesis profile 'caracal'
rootdir: /home/raw/Documents/workspace/caracalEcosystem/Caracal
configfile: pyproject.toml
plugins: hypothesis-6.151.4, cov-7.0.0, anyio-4.12.1
collecting ... collected 14 items / 10 deselected / 4 selected

tests/unit/test_sdk_client.py::TestBudgetCheckContext::test_budget_check_context_success PASSED [ 25%]
tests/unit/test_sdk_client.py::TestBudgetCheckContext::test_budget_check_context_exceeded PASSED [ 50%]
tests/unit/test_sdk_client.py::TestBudgetCheckContext::test_budget_check_context_no_policy PASSED [ 75%]
tests/unit/test_sdk_client.py::TestBudgetCheckContext::test_budget_check_context_with_exception PASSED [100%]

=============================== warnings summary ===============================
tests/unit/test_sdk_client.py::TestBudgetCheckContext::test_budget_check_context_success
tests/unit/test_sdk_client.py::TestBudgetCheckContext::test_budget_check_context_exceeded
tests/unit/test_sdk_client.py::TestBudgetCheckContext::test_budget_check_context_no_policy
tests/unit/test_sdk_client.py::TestBudgetCheckContext::test_budget_check_context_with_exception
  /home/raw/Documents/workspace/caracalEcosystem/Caracal/caracal/core/identity.py:115: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    created_at=datetime.utcnow().isoformat() + "Z",

tests/unit/test_sdk_client.py::TestBudgetCheckContext::test_budget_check_context_success
tests/unit/test_sdk_client.py::TestBudgetCheckContext::test_budget_check_context_exceeded
tests/unit/test_sdk_client.py::TestBudgetCheckContext::test_budget_check_context_with_exception
  /home/raw/Documents/workspace/caracalEcosystem/Caracal/caracal/core/policy.py:152: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    created_at=datetime.utcnow().isoformat() + "Z",

tests/unit/test_sdk_client.py::TestBudgetCheckContext::test_budget_check_context_success
tests/unit/test_sdk_client.py::TestBudgetCheckContext::test_budget_check_context_exceeded
tests/unit/test_sdk_client.py::TestBudgetCheckContext::test_budget_check_context_no_policy
tests/unit/test_sdk_client.py::TestBudgetCheckContext::test_budget_check_context_with_exception
  /home/raw/Documents/workspace/caracalEcosystem/Caracal/caracal/core/policy.py:366: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    current_time = datetime.utcnow()

tests/unit/test_sdk_client.py::TestBudgetCheckContext::test_budget_check_context_exceeded
  /home/raw/Documents/workspace/caracalEcosystem/Caracal/caracal/core/metering.py:48: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    self.timestamp = datetime.utcnow()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.14.2-final-0 ________________

Name                         Stmts   Miss  Cover   Missing
----------------------------------------------------------
caracal/__init__.py              1      0   100%
caracal/cli/__init__.py          0      0   100%
caracal/config/__init__.py       2      0   100%
caracal/config/settings.py     104     25    76%   69, 134, 141, 147-152, 158, 165-166, 191, 270, 272, 274, 276, 278, 282, 288, 293, 300, 307, 314, 319, 324, 329
caracal/core/__init__.py         0      0   100%
caracal/core/identity.py        83     34    59%   50, 79, 103, 147, 179, 182-183, 200-222, 231-249
caracal/core/ledger.py         193     88    54%   110-111, 147, 149, 151, 153, 157-158, 162, 184-185, 227-228, 250-293, 307-333, 357-359, 394, 403, 406, 422, 431, 436-445, 455-460, 497-501, 528-553
caracal/core/metering.py        48      9    81%   116-120, 144, 150, 156, 161, 167
caracal/core/policy.py         135     45    67%   57, 97, 124, 132, 138, 196, 228, 231-232, 249-271, 280-302, 386, 393-395, 418-423
caracal/core/pricebook.py      134     80    40%   48, 58, 96, 113-117, 138-162, 174, 190-242, 266, 272, 283-286, 294, 308-309, 317-328, 345-383, 397-421
caracal/exceptions.py           64      0   100%
caracal/logging_config.py       25     18    28%   26-56
caracal/sdk/__init__.py          3      0   100%
caracal/sdk/client.py           76     30    61%   76-79, 141-142, 197-203, 230-258, 279-299
caracal/sdk/context.py          28      6    79%   79-94
----------------------------------------------------------
TOTAL                          896    335    63%
Coverage HTML written to dir htmlcov
================ 4 passed, 10 deselected, 12 warnings in 0.19s =================
